# 自动化测试 基础篇
资料源：https://juejin.cn/post/6844904194600599560#heading-30

## 测试必要性
- 提高代码质量
- 准确定位问题
- 方便迭代/重构
- 最大程度保证产品符合预期
- 减少回归流程
- 提升开发者信息和安全感

测试自动化收益 = （迭代次数\*手动测试成本）- 首次自动化成本 - （维护次数\*维护成本）

## 测试类型
- 单元测试 
- 集成测试
- UI测试

权重占比：
![image](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7391f504a49740a696e03869aac48648~tplv-k3u1fbpfcp-zoom-1.image)

### 单元测试
- 适用于代码中多个组件共用的工具类库，多个组件共用的子组件
- 公用函数/组件中需要单元测试保证代码正常工作，单元测试应该是项目中数量最多，覆盖率最高
- 能进行单元测试的函数/组件，一定是低耦合的，一定程度保证代码质量

### 集成测试
- 适用于耦合度高的函数/组件、经过二次封装的函数/组件、多个函数/组件组合而成的函数/组件
- 目的：测试经过单元测试后，各个模块组合在一起是否能正常工作，会对组合之后的代码整体暴露在外接口进行测试，查看组合后的代码是否符合预期
- 集成测试是安全度较高的测试，能很大程度提升开发者信心，集成用例设计合理且测试通过能够保证产品符合预期

### UI测试
- UI测试比较贴合开发流程。
- UI测试一般会使用Mock的服务器和数据
- UI测试的自动化程度不高，大多依赖人工，部分自动化测试工具会提供快照功能，能帮助我们在一定程度上实现UI测试

## 自动化测试的项目边界
- 公共库类的开发维护
- 中长期项目的迭代/重构
- 引用了不可控的第三方依赖

## 主流自动化测试工具
- 单测：Mocha, Ava, Karma, Jest, Jasmine
- 集成测试和UI测试：ReactTestUtils, Test Render, Enzyme, React-Testing-Library, Vue-Test-Utils

### 比较

框架 | 断言 | 仿真 | 快照 | 异步测试 | 
---|---|---|---|---|
Mocha | 默认不支持，可配置 | 默认不支持，可配置 | 默认不支持，可配置 | 友好
Ava | 默认支持 | 不支持，需要第三方配置 | 默认支持| 友好
Jasmine | 默认支持 | 默认支持 | 默认支持| 不友好
Jest | 默认支持 | 默认支持 | 默认支持| 友好
Karma | 不支持，需要第三方配置 | 不支持，需要第三方配置 | 不支持，需要第三方配置| 不支持，需要第三方配置

- Mocha：Mocha 是生态最好，使用最广泛的单测框架，但是他需要较多的配置来实现它的高扩展性
- Ava 是更轻量高效简单的单测框架，但是自身不够稳定，并发运行文件多的时候会撑爆 CPU
- Jasmine 是单测框架的“元老”，开箱即用，但是异步测试支持较弱
- Jest 基于 Jasmine, 做了大量修改并添加了很多特性，同样开箱即用，但异步测试支持良好
- Karma 能在真实的浏览器中测试，强大适配器，可配置其他单测框架，一般会配合 Mocha 或 Jasmine 等一起使用


# 京喜自动化测试
资料：https://juejin.cn/post/6844904150631710727#heading-0

自动化测试工具：
- puppeteer：
    - https://zhaoqize.github.io/puppeteer-api-zh_CN/#/ 
- cypress：
    - https://github.com/BingKui/cypress-doc-zh
    - 